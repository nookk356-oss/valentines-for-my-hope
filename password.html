<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enter passcode üíó</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at top,#ffd9ea,#f6b5d4);
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
  overflow:hidden;
  transition:opacity .9s ease;
}
body.fade-out{opacity:0}

/* ===== BACKGROUND HEART ===== */
.bg-heart{
  position:fixed;
  font-size:160px;
  opacity:.07;
  filter:blur(2px);
  animation:float 20s linear infinite;
}
@keyframes float{
  to{transform:translateY(-150vh) rotate(18deg)}
}

/* ===== CARD ===== */
.card{
  width:320px;
  text-align:center;
  z-index:5;
}
.card.shake{
  animation:shake .42s cubic-bezier(.36,.07,.19,.97);
}
@keyframes shake{
  0%{transform:translateX(0)}
  15%{transform:translateX(-10px)}
  30%{transform:translateX(10px)}
  45%{transform:translateX(-8px)}
  60%{transform:translateX(8px)}
  75%{transform:translateX(-4px)}
  100%{transform:translateX(0)}
}

/* ===== TITLE ===== */
h1{
  color:#fff;
  font-size:22px;
  font-weight:600;
  margin-bottom:20px;
  text-shadow:0 2px 10px rgba(0,0,0,.15);
}

/* ===== PASS DISPLAY ===== */
.display{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:26px;
}
.pixel{
  width:18px;height:18px;
  background:linear-gradient(135deg,#ff7fbf,#ffd1ea);
  clip-path:path("M8 15 L2 8 C-1 5 3 1 8 5 C13 1 17 5 14 8 Z");
  opacity:.25;
  transform:scale(.85);
}
.pixel.on{opacity:1;transform:scale(1)}
.pixel.wave{
  animation:wave .7s cubic-bezier(.4,0,.2,1) forwards;
}
@keyframes wave{
  0%{transform:scale(.6)}
  50%{transform:scale(1.35)}
  100%{transform:scale(1)}
}

/* ===== KEYPAD ===== */
.keypad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
}
.keypad button{
  height:66px;
  border-radius:50%;
  border:none;
  background:rgba(255,255,255,.22);
  backdrop-filter:blur(14px);
  color:#fff;
  font-size:22px;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.35),
    0 10px 22px rgba(0,0,0,.18);
  cursor:pointer;
}
.keypad button:active{transform:scale(.86)}

/* ===== HEART POP ===== */
.heart{
  position:fixed;
  font-size:18px;
  pointer-events:none;
  animation:heart .8s ease-out forwards;
}
@keyframes heart{
  to{opacity:0;transform:translateY(-46px) scale(1.7)}
}

/* ===== SPARKLE ===== */
.sparkle{
  position:fixed;
  font-size:16px;
  pointer-events:none;
  animation:spark 1s ease-out forwards;
}
@keyframes spark{
  to{opacity:0;transform:translateY(-70px) scale(1.6)}
}
</style>
</head>

<body>

<!-- üîä AUDIO -->
<audio id="tapSound" src="./sounds/tap.mp3" preload="auto"></audio>
<audio id="successSound" src="./sounds/success.mp3" preload="auto"></audio>
<audio id="errorSound" src="./sounds/error.mp3" preload="auto"></audio>

<script>
/* floating hearts */
for(let i=0;i<6;i++){
  const h=document.createElement("div");
  h.className="bg-heart";
  h.textContent="üíó";
  h.style.left=Math.random()*100+"%";
  h.style.bottom="-180px";
  h.style.animationDuration=16+Math.random()*8+"s";
  document.body.appendChild(h);
}
</script>

<div class="card" id="card">
  <h1>Enter passcode</h1>

  <div class="display">
    <div class="pixel"></div><div class="pixel"></div><div class="pixel"></div>
    <div class="pixel"></div><div class="pixel"></div><div class="pixel"></div>
  </div>

  <div class="keypad">
    <button onclick="press(this,1)">1</button>
    <button onclick="press(this,2)">2</button>
    <button onclick="press(this,3)">3</button>
    <button onclick="press(this,4)">4</button>
    <button onclick="press(this,5)">5</button>
    <button onclick="press(this,6)">6</button>
    <button onclick="press(this,7)">7</button>
    <button onclick="press(this,8)">8</button>
    <button onclick="press(this,9)">9</button>
    <button onclick="clearAll()">‚å´</button>
    <button onclick="press(this,0)">0</button>
    <button onclick="check()">‚èé</button>
  </div>
</div>

<script>
const correct="290825";
let input="";
const pixels=document.querySelectorAll(".pixel");
const card=document.getElementById("card");

const tapSound=document.getElementById("tapSound");
const successSound=document.getElementById("successSound");
const errorSound=document.getElementById("errorSound");

/* üîë AUDIO UNLOCK */
let audioUnlocked=false;
function unlockAudio(){
  if(audioUnlocked) return;
  [tapSound,successSound,errorSound].forEach(a=>{
    a.volume=0;
    a.play().then(()=>{a.pause();a.currentTime=0;}).catch(()=>{});
  });
  audioUnlocked=true;
}

function playSound(a){
  a.volume=0.9;
  a.currentTime=0;
  a.play().catch(()=>{});
}

function haptic(p=[8]){
  if(navigator.vibrate) navigator.vibrate(p);
}

/* EFFECTS */
function heartPop(btn){
  const r=btn.getBoundingClientRect();
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="üíñ";
  h.style.left=r.left+r.width/2+"px";
  h.style.top=r.top+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),800);
}
function sparkleBurst(){
  for(let i=0;i<16;i++){
    const s=document.createElement("div");
    s.className="sparkle";
    s.textContent=Math.random()>.5?"‚ú®":"‚ú¶";
    s.style.left=window.innerWidth/2+"px";
    s.style.top=window.innerHeight/2+"px";
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),1000);
  }
}

/* LOGIC */
function press(btn,n){
  unlockAudio();
  if(input.length<6){
    input+=n;
    pixels[input.length-1].classList.add("on");
    heartPop(btn);
    playSound(tapSound);
    haptic([8]);
  }
}

function clearAll(){
  input="";
  pixels.forEach(p=>p.className="pixel");
}

function check(){
  unlockAudio();
  if(input===correct){
    playSound(successSound);
    haptic([20,30,20]);
    pixels.forEach((p,i)=>setTimeout(()=>p.classList.add("wave"),i*90));
    sparkleBurst();
    setTimeout(()=>{
      document.body.classList.add("fade-out");
      setTimeout(()=>location.href="menu.html",900);
    },800);
  }else{
    playSound(errorSound);
    haptic([20,20,20]);
    card.classList.add("shake");
    setTimeout(()=>card.classList.remove("shake"),420);
    clearAll();
  }
}
</script>

</body>
</html>
